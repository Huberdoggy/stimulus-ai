/* ==========================================================================
   Stimulus AI — Cinematic Aurora Theme (2025)
   ========================================================================== */

:root{
  --bg:            #0b0e13;
  --panel:         #0e1218;
  --text:          #e8edf2;
  --muted:         #a8b2bd;

  --aurora-1:      #7c6cf6;  /* violet → */
  --aurora-2:      #29d3ff;  /* azure   */
  --aurora-3:      #ff3e9e;
  --aurora-4:      #34d399;

  --ring:          rgba(41,211,255,.20);
  --ring-strong:   rgba(41,211,255,.55);

  --radius:        16px;
  --shadow-soft:   0 18px 40px rgba(0,0,0,.55);
  --shadow-lift:   0 24px 48px rgba(0,0,0,.6);
  --shadow-neon:   0 0 24px rgba(41,211,255,.18), 0 0 36px rgba(255,62,158,.12);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
  font-size: 16px;
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  overflow-x: hidden;
}

/* =================== INTRO =================== */
.intro{
  position: fixed; inset: 0; background: #000;
  display: flex; align-items: center; justify-content: center;
  z-index: 9999;
}
.intro__img{
  width: clamp(160px, 28vw, 360px); height: auto; display: block;
  animation: introPulse 1800ms ease-in-out infinite;
  filter: drop-shadow(0 0 14px rgba(52,211,153,.32)) drop-shadow(0 0 26px rgba(52,211,153,.18));
}
@keyframes introPulse{ 0%,100%{ transform: scale(1) } 50%{ transform: scale(1.035) } }

/* =================== APP WRAPPER =================== */
.app{ opacity:0; transform: translateY(6px); transition: opacity 900ms ease, transform 900ms ease; }
.app.ready{ opacity:1; transform:none; }

.container{ max-width:1180px; margin:0 auto; padding:24px; }

/* =================== HERO (bounded aurora) =================== */
.hero{
  position: relative;
  overflow: hidden;         /* contain aurora */
  isolation: isolate;
  contain: paint;
  padding: 56px 0 48px;
  background: radial-gradient(1200px 520px at 50% 0%, rgba(255,255,255,0.02), transparent 60%);
}
.hero::before,
.hero::after{
  content:"";
  position:absolute;
  inset:-16% -8% -28% -8%;
  z-index:0;
  pointer-events:none;
  opacity:0;
  filter: blur(22px) saturate(120%);
  transform: translateZ(0) scale(1.04);
  transition: opacity 1000ms ease 200ms;
}
.app.ready .hero::before{
  background:
    radial-gradient(60% 140% at 10% 10%,  rgba(124,108,246,.28), transparent 60%),
    radial-gradient(70% 130% at 90% 20%,  rgba(41,211,255,.25), transparent 62%),
    radial-gradient(60% 120% at 40% 80%,  rgba(255,62,158,.25), transparent 63%),
    conic-gradient(from 30deg at 50% 25%, rgba(41,211,255,.22), rgba(124,108,246,.18), rgba(255,62,158,.22), rgba(41,211,255,.22));
  animation: auroraShift 36s linear infinite; opacity:1;
}
.app.ready .hero::after{
  background:
    radial-gradient(50% 120% at 60% 0%, rgba(52,211,153,.20), transparent 60%),
    radial-gradient(40% 100% at 30% 70%, rgba(41,211,255,.16), transparent 60%);
  animation: auroraBreathe 18s ease-in-out infinite; opacity:1;
}
@keyframes auroraShift{ 0%{transform:translateY(0) scale(1.04) rotate(0)} 50%{transform:translateY(-2%) scale(1.06) rotate(180deg)} 100%{transform:translateY(0) scale(1.04) rotate(360deg)} }
@keyframes auroraBreathe{ 0%,100%{transform:translateY(0);opacity:.95} 50%{transform:translateY(-1%);opacity:1} }

.hero__content{
  position: relative; z-index:1;
  display:grid; grid-template-columns: 1fr auto; gap:24px; align-items:end;
}
@media (max-width: 840px){ .hero__content{ grid-template-columns: 1fr; gap:14px; } }

/* ---------- Logo + azure gradient dot ---------- */
.logo{
  font-family: "DM Serif Display", serif;
  font-size: clamp(36px, 6vw, 60px);
  margin: 0; letter-spacing: .4px; line-height: 1.2;
  text-shadow: 0 6px 32px rgba(0,0,0,.55), 0 0 26px rgba(41,211,255,.10);
}
.logo__dot{
  display:inline-block; vertical-align: baseline; line-height:1;
  /* azure gradient restored */
  background-image: linear-gradient(135deg, var(--aurora-1), var(--aurora-2));
  background-clip: text; -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: none;
  opacity: 0;
  transform: translate3d(0,0,0);
  will-change: transform, opacity;
}
.app.ready .logo__dot{
  /* lock visible even if animations are throttled */
  opacity: 1;
  animation:
    dotBounceStrong 2800ms cubic-bezier(.2,.8,.2,1) 320ms 1 both,
    dotFloat 2600ms ease-in-out 3120ms infinite;
}
/* bounce then gentle float (intentional) */
@keyframes dotBounceStrong{
  0%   { opacity: 0; transform: translate3d(0,-22px,0) scale(.7); }
  12%  { opacity: 1; transform: translate3d(0,0,0)      scale(1.00); }
  25%  {            transform: translate3d(0,-14px,0)   scale(.98); }
  37%  {            transform: translate3d(0,0,0)       scale(1.00); }
  50%  {            transform: translate3d(0,-10px,0)   scale(.99); }
  62%  {            transform: translate3d(0,0,0)       scale(1.00); }
  75%  {            transform: translate3d(0,-6px,0)    scale(1.00); }
  87%  {            transform: translate3d(0,0,0)       scale(1.00); }
  100% { opacity: 1; transform: translate3d(0,0,0)      scale(1.00); }
}

@keyframes dotFloat{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-3px) } }

.tagline{ grid-column: 1 / -1; margin: 6px 0 0; color: var(--muted); }

/* ---------- HUD ---------- */
.hero__hud{ display:flex; align-items:center; gap:12px; justify-self:end; }
.badge{
  display:inline-flex; align-items:center; gap:.45rem;
  padding:.28rem .6rem;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 999px; color: var(--text);
  box-shadow: var(--shadow-soft); font-size: .92rem;
}
.badge .dot{ width:.6rem; height:.6rem; border-radius:50%; background:#bdbdbd; display:inline-block; transform-origin:center; }
.badge.ok{ border-color: var(--ring-strong); animation: okPulse 2600ms ease-in-out infinite; }
.badge.ok .dot{ background: var(--aurora-4); animation: dotPulse 2600ms ease-in-out infinite; }
@keyframes okPulse{ 0%,100%{ box-shadow:0 0 0 2px var(--ring),0 0 16px var(--ring)} 50%{ box-shadow:0 0 0 6px var(--ring),0 0 28px var(--ring)} }
@keyframes dotPulse{ 0%,100%{ transform:scale(1) } 50%{ transform:scale(1.12) } }

/* ---------- Toggle ---------- */
.toggle{ display:inline-flex; align-items:center; gap:8px; }
.toggle input{ position:absolute; opacity:0; pointer-events:none; }
.toggle__track{
  width:46px; height:26px; border-radius:999px; display:inline-block;
  background:#111722; border:1px solid rgba(255,255,255,.14);
  position:relative; transition: all .2s ease; box-shadow: inset 0 0 0 1px transparent;
}
.toggle__track::after{
  content:""; position:absolute; top:3px; left:3px; width:20px; height:20px; border-radius:50%;
  background: linear-gradient(135deg, #1f2937, #0f1623);
  box-shadow: 0 2px 10px rgba(0,0,0,.35);
  transition: transform .22s ease, background .22s ease;
}
.toggle input:checked + .toggle__track{ border-color: var(--ring-strong); box-shadow: 0 0 0 3px var(--ring); background: linear-gradient(135deg, rgba(41,211,255,.20), rgba(124,108,246,.20)); }
.toggle input:checked + .toggle__track::after{ transform: translateX(20px); background: linear-gradient(135deg, var(--aurora-2), var(--aurora-4)); }
.toggle__label{ color: var(--muted); font-size: .92rem; }

/* =================== MAIN + CARD =================== */
.main{ padding-top: 10px; }
.form-card{
  position: relative;
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00)) , var(--panel);
  border-radius: var(--radius);
  padding: 18px;
  box-shadow: var(--shadow-lift);
  transform: translateZ(0);
  border: 1px solid rgba(255,255,255,.10);
  overflow: clip;
}
.form-card::before{
  content:""; position:absolute; inset:0; border-radius: inherit; padding: 1px;
  background: linear-gradient(135deg, rgba(41,211,255,.65), rgba(255,62,158,.65));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  pointer-events: none; opacity: .75;
}
.form-card:focus-within{ box-shadow: 0 0 0 3px var(--ring), var(--shadow-lift); }

/* textarea */
textarea{
  width: 100%; min-height: 240px; resize: vertical;
  color: var(--text); background: #0d141d;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 14px; padding: 14px 14px;
  box-shadow: inset 0 0 0 1px transparent;
  outline: none; transition: box-shadow .2s ease, border-color .2s ease;
  caret-color: var(--aurora-2);
}
textarea::placeholder{ color: #7e8a97; }
textarea:focus{ border-color: var(--ring-strong); box-shadow: 0 0 0 3px var(--ring); }

/* controls */
.controls{ display:flex; gap:10px; align-items:center; margin-top:12px; }

/* circular buttons */
.btn-circle{
  width:52px; height:52px; border-radius:999px;
  display:inline-grid; place-items:center;
  color:#0a0e13; border:1px solid rgba(255,255,255,.10);
  background: linear-gradient(135deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
  box-shadow: var(--shadow-neon);
  cursor:pointer; transition: transform .08s ease, filter .2s ease, box-shadow .2s ease, background .2s ease;
}
.btn-circle:hover{ transform: translateY(-1px); }
.btn-compile:hover{ background: linear-gradient(135deg, rgba(52,211,153,.95), rgba(41,211,255,.95)); box-shadow: 0 0 0 4px rgba(52,211,153,.18), var(--shadow-neon); color:#001014; }
.btn-clear:hover{   background: linear-gradient(135deg, rgba(255,62,158,.95), rgba(252,92,125,.95)); box-shadow: 0 0 0 4px rgba(255,62,158,.18), var(--shadow-neon); color:#100005; }


/* unified controls extras */
.controls__divider{
  width:1px; height:32px; margin:0 6px 0 2px;
  background: linear-gradient(to bottom, rgba(255,255,255,.06), rgba(255,255,255,.14), rgba(255,255,255,.06));
  border-radius:1px;
}
.controls__id{
  height:38px; min-width:120px; max-width:180px; padding:0 10px;
  color:var(--text); background:#0d141d; border:1px solid rgba(255,255,255,.12);
  border-radius:999px; outline:none; transition: box-shadow .2s ease, border-color .2s ease;
}
.controls__id::placeholder{ color:#7e8a97; }
.controls__id:focus{ border-color: var(--ring-strong); box-shadow: 0 0 0 3px var(--ring); }

.btn-ghost:hover{
  background: linear-gradient(135deg, rgba(41,211,255,.95), rgba(124,108,246,.95));
  box-shadow: 0 0 0 4px rgba(41,211,255,.18), var(--shadow-neon);
  color:#001014;
}
.controls__msg{ margin-left:6px; font-size:.92rem; color:var(--muted); }

.visually-hidden{
  position:absolute!important; width:1px!important; height:1px!important;
  padding:0!important; margin:-1px!important; overflow:hidden!important;
  clip:rect(0,0,0,0)!important; white-space:nowrap!important; border:0!important;
}

/* ---------- RESULTS ---------- */
.result{ margin-top:26px; }
.result__role{
  font-family:"DM Serif Display", serif;
  font-size:clamp(24px,3vw,32px);
  margin:0 0 2px 0; letter-spacing:.3px;
  text-shadow:0 6px 32px rgba(0,0,0,.55), 0 0 24px rgba(41,211,255,.10);
}
.result__company{ margin:2px 0 12px 0; font-weight:600; letter-spacing:.3px; color:#dce4eb; opacity:.92; }
#company:empty{ display:none; }

.grid{ display:grid; grid-template-columns:1fr; gap:14px; }
@media (min-width: 900px){ .grid{ grid-template-columns: 1fr 1fr; } }

.theme{
  position:relative;
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)) , var(--panel);
  border:1px solid rgba(255,255,255,.10);
  border-radius:14px; padding:14px 16px;
  box-shadow: var(--shadow-soft); overflow: clip;
  animation: floaty 10s ease-in-out infinite;
}
.theme::before{
  content:""; position:absolute; inset:0; border-radius:inherit; padding:1px;
  background: linear-gradient(135deg, rgba(41,211,255,.65), rgba(255,62,158,.65));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  opacity:.6; pointer-events:none;
}
@keyframes floaty{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-4px) } }
.theme h3{ margin:0 0 .3rem 0; font-size:1.06rem; letter-spacing:.2px; text-shadow:0 1px 16px rgba(41,211,255,.12); }
.theme strong{ display:block; margin:.35rem 0 .2rem; color:var(--text); }
.theme ul{ margin:.1rem 0 .6rem 1.1rem; color:var(--muted); }
.theme li{ margin:.18rem 0; }

/* a11y */
.sr-only{
  position:absolute!important; width:1px!important; height:1px!important;
  padding:0!important; margin:-1px!important; overflow:hidden!important;
  clip:rect(0,0,0,0)!important; white-space:nowrap!important; border:0!important;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .intro__img{ animation:none !important; }
  .app.ready .hero::before, .app.ready .hero::after, .theme{ animation:none !important; }
  .app.ready .logo__dot{ animation:none !important; opacity:1 !important; }
}
